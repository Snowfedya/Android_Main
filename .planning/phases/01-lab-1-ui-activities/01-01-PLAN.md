---
phase: 01-lab-1-ui-activities
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lab-1/app/src/main/java/com/willpower/tracker/activities/SignInActivity.kt
  - lab-1/app/src/main/java/com/willpower/tracker/activities/SignUpActivity.kt
  - lab-1/app/src/main/res/values/strings.xml
autonomous: true
user_setup: []

must_haves:
  truths:
    - "User can navigate through 4 Activity screens (Onboard → SignIn → SignUp → Home)"
    - "Email validation requires @ symbol (not full regex)"
    - "Password validation requires minimum 4 characters (not 6)"
    - "RecyclerView displays sample challenge data from Challenge.getSampleChallenges()"
    - "All buttons and UI elements are tappable and responsive"
    - "Material Design 3 theme applied consistently across all screens"
  artifacts:
    - path: "lab-1/app/src/main/java/com/willpower/tracker/activities/OnboardActivity.kt"
      provides: "Onboarding screen with app description and 'Начать' button"
      min_lines: 20
    - path: "lab-1/app/src/main/java/com/willpower/tracker/activities/SignInActivity.kt"
      provides: "Sign in screen with email/password validation (4 chars min)"
      contains: "password.length < 4"
    - path: "lab-1/app/src/main/java/com/willpower/tracker/activities/SignUpActivity.kt"
      provides: "Sign up screen with extended validation"
      contains: "validateInput"
    - path: "lab-1/app/src/main/java/com/willpower/tracker/activities/HomeActivity.kt"
      provides: "Home screen with RecyclerView challenge list"
      contains: "ChallengeAdapter"
    - path: "lab-1/app/src/main/java/com/willpower/tracker/models/Challenge.kt"
      provides: "Challenge model with getSampleChallenges() factory method"
      contains: "getSampleChallenges"
    - path: "lab-1/app/src/main/java/com/willpower/tracker/adapters/ChallengeAdapter.kt"
      provides: "RecyclerView adapter for challenge list display"
      min_lines: 50
  key_links:
    - from: "lab-1/app/src/main/java/com/willpower/tracker/activities/SignInActivity.kt"
      to: "lab-1/app/src/main/java/com/willpower/tracker/activities/HomeActivity.kt"
      via: "Intent startActivity on successful validation"
      pattern: "Intent.*HomeActivity"
    - from: "lab-1/app/src/main/java/com/willpower/tracker/activities/HomeActivity.kt"
      to: "lab-1/app/src/main/java/com/willpower/tracker/models/Challenge.kt"
      via: "getSampleChallenges() call"
      pattern: "Challenge\\.getSampleChallenges\\(\\)"
---

<objective>
Fix password validation mismatch and verify Lab 1 meets all LABS.md requirements.

Purpose: Align existing implementation with LABS.md specification (4 chars minimum password, not 6). Ensure all UI validation matches requirements.
Output: Updated validation logic and verified Lab 1 implementation ready for ADB testing.
</objective>

<execution_context>
@/home/snow/.claude/get-shit-done/workflows/execute-plan.md
@/home/snow/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@LABS.md
@lab-1/app/build.gradle.kts
@lab-1/app/src/main/AndroidManifest.xml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix password validation to match LABS.md requirement (4 chars minimum)</name>
  <files>lab-1/app/src/main/java/com/willpower/tracker/activities/SignInActivity.kt, lab-1/app/src/main/java/com/willpower/tracker/activities/SignUpActivity.kt, lab-1/app/src/main/res/values/strings.xml</files>
  <action>
    Update password validation in both SignInActivity.kt and SignUpActivity.kt:

    1. In SignInActivity.kt (line 72):
       - Change: `else if (password.length < 6)`
       - To: `else if (password.length < 4)`
       - This aligns with LABS.md requirement: "Пароль ≥ 4 символов (минимум)"

    2. In SignUpActivity.kt (line 115):
       - Change: `else if (password.length < 6)`
       - To: `else if (password.length < 4)`
       - Keep the digit validation requirement (line 118) as it's good practice

    3. Update strings.xml error message if it references "6 characters":
       - Check `error_password_short` string and ensure it says "4 символа" not "6 символов"
       - Or use generic wording like "Минимум 4 символа"

    Do NOT modify any other validation logic (email, confirm password, etc.) - only the minimum character count.
  </action>
  <verify>
    cd /home/snow/Projects/Android_Main/lab-1 && ./gradlew clean build
    Also grep for "password.length <" to confirm both files now use 4
  </verify>
  <done>
    Both SignInActivity and SignUpActivity validate password with minimum 4 characters.
    Build succeeds without errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify Lab 1 implementation meets all LABS.md requirements</name>
  <files>lab-1/app/src/main/java/com/willpower/tracker/activities/*.kt, lab-1/app/src/main/res/layout/*.xml</files>
  <action>
    Verify all LABS.md Lab 1 requirements are met by checking existing implementation:

    1. UI-01 (Onboarding Screen):
       - Confirm activity_onboard.xml has app description
       - Confirm OnboardActivity.kt has "Начать" button → SignInActivity

    2. UI-02 (Sign In Screen):
       - Confirm activity_sign_in.xml has email/password TextInputLayouts
       - Confirm SignInActivity.kt validates email contains @ and password ≥ 4 chars
       - Confirm "Войти" → HomeActivity, "Регистрация" → SignUpActivity

    3. UI-03 (Sign Up Screen):
       - Confirm activity_sign_up.xml has name, email, password, confirm password fields
       - Confirm SignUpActivity.kt has extended validation

    4. UI-04 (Home Screen):
       - Confirm activity_home.xml has RecyclerView
       - Confirm HomeActivity.kt uses Challenge.getSampleChallenges()
       - Confirm ChallengeAdapter displays title, description, category, duration

    5. UI-05 (Material Design 3):
       - Confirm themes.xml uses Material 3 theme (Theme.Material3.DayNight)
       - Confirm colors.xml uses Material 3 color scheme

    6. UI-06 (Challenge cards):
       - Confirm item_challenge.xml has proper card layout with Chip for category

    If any requirement is NOT met, document the gap in a comment at the top of the relevant Activity file.
    Based on code review, all requirements should be met (implementation exists and looks correct).
  </action>
  <verify>
    cd /home/snow/Projects/Android_Main/lab-1 && find app/src/main -name "*.kt" -exec grep -l "TODO.*LABS.md" {} \;
    Should return empty (no missing requirements marked as TODO)
  </verify>
  <done>
    All 6 LABS.md requirements (UI-01 through UI-06) verified as implemented.
    No gaps found or all gaps documented.
  </done>
</task>

</tasks>

<verification>
Build verification:
```bash
cd /home/snow/Projects/Android_Main/lab-1 && ./gradlew clean assembleDebug
```

Manual verification checklist:
- [ ] OnboardActivity displays with "Начать" button
- [ ] SignInActivity accepts 4-character password (was 6)
- [ ] Email validation requires @ symbol
- [ ] Navigation flows work: Onboard → SignIn → Home, SignIn → SignUp → SignIn
- [ ] HomeActivity shows 7 sample challenges from getSampleChallenges()
- [ ] All screens use Material Design 3 styling
</verification>

<success_criteria>
1. Password validation updated to 4 characters minimum in both SignIn and SignUp activities
2. All LABS.md Lab 1 requirements verified as implemented
3. Project builds successfully with ./gradlew build
4. Ready for ADB testing verification (actual device testing in next step)
</success_criteria>

<output>
After completion, create `.planning/phases/01-lab-1-ui-activities/01-01-SUMMARY.md` with:
- Password validation change summary (6 → 4 chars)
- LABS.md requirements verification results
- Build confirmation
- Any gaps found and addressed
</output>
