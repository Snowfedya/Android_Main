---
phase: 01-lab-1-ui-activities
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - .planning/phases/01-lab-1-ui-activities/01-02-ADB-TEST-PLAN.md
autonomous: false
user_setup: []
gap_closure: false

must_haves:
  truths:
    - "All 4 Activity screens are navigable via ADB"
    - "All buttons respond to ADB tap commands"
    - "Email validation works correctly with test inputs"
    - "Password validation accepts 4-character passwords"
    - "RecyclerView displays challenge items on HomeActivity"
    - "No crashes or ANRs during ADB testing session"
  artifacts:
    - path: ".planning/phases/01-lab-1-ui-activities/01-02-ADB-TEST-PLAN.md"
      provides: "ADB test script and verification results"
      contains: "adb shell"
  key_links:
    - from: "ADB test script"
      to: "lab-1 installed on device/emulator"
      via: "adb install lab-1/app/build/outputs/apk/debug/app-debug.apk"
      pattern: "adb install"
---

<objective>
Perform comprehensive ADB testing of Lab 1 to verify all UI elements, navigation flows, and validation rules work correctly on device/emulator.

Purpose: LABS.md requires ADB testing verification. This plan ensures all screens are navigable, buttons are functional, and validation works as specified.
Output: ADB test results document confirming Lab 1 meets all acceptance criteria.
</objective>

<execution_context>
@/home/snow/.claude/get-shit-done/workflows/execute-plan.md
@/home/snow/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@LABS.md
@.planning/phases/01-lab-1-ui-activities/01-01-PLAN.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build and deploy Lab 1 APK for ADB testing</name>
  <files>lab-1/app/build/outputs/apk/debug/app-debug.apk</files>
  <action>
    Build debug APK and install on connected device/emulator:

    1. Navigate to lab-1 directory:
       `cd /home/snow/Projects/Android_Main/lab-1`

    2. Clean and build debug APK:
       `./gradlew clean assembleDebug`

    3. Verify APK was created:
       `ls -lh app/build/outputs/apk/debug/app-debug.apk`

    4. Check for connected devices:
       `adb devices`

    5. Install APK on device:
       `adb install -r app/build/outputs/apk/debug/app-debug.apk`
       (Use -r flag to replace if already installed)

    6. Verify installation:
       `adb shell pm list packages | grep willpower`

    Document the APK size and installation result in preparation for ADB testing.
  </action>
  <verify>
    Confirm APK exists and install command succeeds:
    `adb shell pm path com.willpower.tracker.lab1`
  </verify>
  <done>
    Debug APK built and installed on device/emulator.
    Package verified as installed.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Lab 1 APK with corrected password validation (4 chars minimum) deployed to device.
  </what-built>
  <how-to-verify>
    Execute the following ADB test sequence and verify each step:

    ## Test 1: OnboardActivity
    ```bash
    # Launch app
    adb shell am start -n com.willpower.tracker.lab1/.activities.OnboardActivity
    # Verify: Onboarding screen displays with "Начать" button
    # Tap "Начать" button
    adb shell input tap 540 1200  # Adjust coordinates based on device
    # Expected: Navigates to SignInActivity
    ```

    ## Test 2: SignInActivity - Invalid Password (too short)
    ```bash
    # Enter email without @
    adb shell input text "invalidemail"
    # Enter 3-char password (should fail - need 4)
    adb shell input text "abc"
    # Tap "Войти"
    adb shell input tap 540 800
    # Expected: Error shown for both email format and password length
    ```

    ## Test 3: SignInActivity - Valid 4-char Password
    ```bash
    # Clear fields
    adb shell input keyevent KEYCODE_MOVE_HOME && adb shell input keyevent KEYCODE_MOVE_END
    # Enter valid email
    adb shell input text "test@example.com"
    # Tab to password field
    adb shell input keyevent TAB
    # Enter 4-char password (minimum per LABS.md)
    adb shell input text "pass"
    # Tap "Войти"
    adb shell input tap 540 800
    # Expected: Navigates to HomeActivity
    ```

    ## Test 4: HomeActivity RecyclerView
    ```bash
    # Verify: RecyclerView displays with 7 sample challenges
    # Each challenge shows: title, description, category chip, duration, streak
    # Scroll through list
    adb shell input swipe 540 1000 540 500
    # Expected: Smooth scrolling, all items visible
    ```

    ## Test 5: SignUpActivity Access
    ```bash
    # Go back to SignIn
    adb shell input keyevent KEYCODE_BACK
    # Tap "Регистрация"
    adb shell input tap 540 900
    # Expected: Navigates to SignUpActivity
    # Verify: Additional fields (name, confirm password, age, gender)
    ```

    ## Test 6: Complete Navigation Flow
    ```
    Onboard → SignIn → SignUp → back to SignIn → Home → back to SignIn → Home
    Expected: All transitions work, back button behavior correct
    ```

    Document results in a markdown file with screenshots (if possible).
  </how-to-verify>
  <resume-signal>
    Type "approved" if all tests passed, or describe any failures.
  </resume-signal>
</task>

<task type="auto">
  <name>Task 3: Document ADB test results and create verification report</name>
  <files>.planning/phases/01-lab-1-ui-activities/01-02-ADB-TEST-PLAN.md</files>
  <action>
    Create ADB test results document with:

    1. Test environment:
       - Device/emulator details (adb shell getprop ro.build.version.release)
       - Screen resolution (adb shell wm size)
       - APK version info

    2. Test results table:
       | Test | Status | Notes |
       |------|--------|-------|
       | OnboardActivity launch | PASS/FAIL | |
       | Email validation (@ check) | PASS/FAIL | |
       | Password validation (4 chars) | PASS/FAIL | |
       | SignIn → Home navigation | PASS/FAIL | |
       | SignIn → SignUp navigation | PASS/FAIL | |
       | HomeActivity RecyclerView | PASS/FAIL | Item count: 7 |
       | Challenge item display | PASS/FAIL | All fields visible |
       | Back navigation | PASS/FAIL | Correct stack behavior |

    3. Any issues found:
       - Crashes (logcat snippets)
       - UI problems (coordinate issues, etc.)
       - Validation mismatches

    4. Conclusion:
       - Lab 1 ready for academic demonstration: YES/NO
       - Recommendations for improvement

    Use human test results from checkpoint to populate the document.
  </action>
  <verify>
    Confirm document created with all sections filled:
    `grep -E "(Test environment|Test results|Conclusion)" .planning/phases/01-lab-1-ui-activities/01-02-ADB-TEST-PLAN.md`
  </verify>
  <done>
    ADB test results document created with:
    - Complete test environment details
    - All 8 tests with PASS/FAIL status
    - Issues documented (if any)
    - Clear conclusion about Lab 1 readiness
  </done>
</task>

</tasks>

<verification>
Manual review of ADB test document:
- [ ] All 8 tests documented with status
- [ ] Device information recorded
- [ ] Conclusion statement provided
- [ ] Any failures have detailed notes with logcat output
</verification>

<success_criteria>
1. APK successfully built and deployed to device/emulator
2. All 8 ADB tests executed and documented
3. Navigation flows verified working (Onboard → SignIn → SignUp → Home)
4. Password validation confirmed working with 4-character minimum
5. RecyclerView confirmed displaying 7 sample challenges
6. Test results document created and reviewed
</success_criteria>

<output>
After completion, create `.planning/phases/01-lab-1-ui-activities/01-02-SUMMARY.md` with:
- ADB testing summary (PASS/FAIL for each test)
- Device/emulator details
- Any issues found and their resolution
- Confirmation that Lab 1 meets all LABS.md acceptance criteria
- Readiness statement for academic demonstration
</output>
